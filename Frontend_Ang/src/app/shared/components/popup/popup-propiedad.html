<div class="popup-propiedad" [class.dark]="isDark">
  <div class="header">
    <h4>{{ piso.address || 'DirecciÃ³n desconocida' }}</h4>
    <button class="fav-btn" (click)="onToggleFavorito()">
      <lucide-icon
        [name]="esFavorito(piso) ? 'heart' : 'heart-off'"
        [style.color]="esFavorito(piso) ? '#e03131' : 'inherit'"
      ></lucide-icon>
    </button>
  </div>

  <div class="body">
    <p class="precio">{{ piso.price ? (piso.price | number) + ' â‚¬' : 'Sin precio' }}</p>
    <p class="detalles">
      <span *ngIf="piso.size">{{ piso.size }} mÂ²</span>
      <span *ngIf="piso.rooms">â€¢ {{ piso.rooms }} hab.</span>
      <span *ngIf="piso.bathrooms">â€¢ {{ piso.bathrooms }} baÃ±os</span>
      <span *ngIf="piso.hasLift">â€¢ ðŸ›— ascensor</span>
    </p>
    <p class="score" *ngIf="piso.score_intrinseco || piso.score">
      Score: {{ piso.score_intrinseco ?? piso.score | number: '1.0-1' }}/100
    </p>

    <a
      *ngIf="piso.url"
      [href]="piso.url"
      target="_blank"
      rel="noopener noreferrer"
      class="link"
    >
      Ver en Idealista â†’
    </a>
  </div>
</div>
